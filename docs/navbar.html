<style>
    /* Importar Bootstrap Icons */
    @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css");
    
    nav {
        background-color: #00a66c;
    }
    
    .navbar-nav .nav-link {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
        font-size: 0.95rem;
    }
    
    .navbar-brand {
        font-size: 1.1rem;
    }
    
    .btn-outline-light {
        border: 2px solid rgba(255,255,255,0.3);
        color: white;
    }
    
    .btn-outline-light:hover {
        background-color: rgba(255,255,255,0.1);
        border-color: white;
        color: white;
    }
    
    /* Estilo do offcanvas */
    .offcanvas-body {
        background-color: #f8f9fa;
    }
    
    .list-group-item-action:hover {
        background-color: #e8f5e8;
        color: #000;
    }

    .list-group-item-action {
        color: #000;
        text-decoration: none;
        border: none;
    }

    .list-group-item-action:focus {
        background-color: #e8f5e8;
        color: #000;
        box-shadow: none;
    }

    /* Remove efeitos azuis de links */
    a, a:link, a:visited, a:active {
        color: inherit;
        text-decoration: none;
    }

    /* Links na navbar principal */
    .navbar-nav .nav-link {
        color: rgba(255,255,255,0.95) !important;
    }

    .navbar-nav .nav-link:hover {
        color: white !important;
        background-color: rgba(255,255,255,0.1);
        border-radius: 4px;
    }

    .navbar-nav .nav-link.active {
        color: white !important;
        font-weight: 500;
    }

    /* Dropdown menu */
    .dropdown-menu .dropdown-item {
        color: #000;
    }

    .dropdown-menu .dropdown-item:hover {
        background-color: #e8f5e8;
        color: #000;
    }

    /* Links do accordion no offcanvas */
    .accordion-body a {
        color: #000;
        transition: color 0.2s ease;
    }

    .accordion-body a:hover {
        color: #000;
        text-decoration: none;
    }
    
    .accordion-button:focus {
        box-shadow: none;
        border-color: #00a66c;
    }
    
    .accordion-button:not(.collapsed) {
        background-color: #e8f5e8;
        color: #00a66c;
    }
    
    /* Estilo das sugest√µes de busca */
    #searchSuggestions {
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        background: white;
        z-index: 1050;
        margin-top: 2px;
    }
    
    #searchSuggestions .list-group-item {
        border: none;
        border-bottom: 1px solid #f8f9fa;
        padding: 0.75rem 1rem;
        transition: all 0.2s ease;
    }
    
    #searchSuggestions .list-group-item:last-child {
        border-bottom: none;
        border-radius: 0 0 0.375rem 0.375rem;
    }
    
    #searchSuggestions .list-group-item:first-child {
        border-radius: 0.375rem 0.375rem 0 0;
    }
    
    #searchSuggestions .list-group-item:hover {
        background-color: #f8f9fa;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    #searchSuggestions .list-group-item .badge {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
    }
    
    #searchSuggestions .text-success {
        font-size: 1.2rem;
        transition: opacity 0.2s ease;
    }
    
    #searchSuggestions .list-group-item:hover .text-success {
        opacity: 0.8;
    }
    
    /* Responsivo */
    @media (max-width: 991.98px) {
        .navbar-nav .nav-link {
            font-size: 0.9rem;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        
        /* Esconder barras de busca em telas pequenas */
        .d-flex[role="search"], 
        .d-flex[action*="duckduckgo"] {
            display: none !important;
        }
    }
</style>

<nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html"><img style="width: 70px" src="assets/img/icon.png" alt="DocGO Logo" />DocGO!</a>
        
        <!-- Bot√£o do menu lateral (offcanvas) -->
        <button class="btn btn-outline-light me-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="index.html"><i class="bi bi-house-fill"></i> Home</a>
                </li>
                <!-- Itens principais mais usados -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Calculadoras
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="calculadoras/imc.html">√çndice de Massa Corporal (IMC)</a></li>
                        <li><a class="dropdown-item" href="calculadoras/tfg.html">Taxa de Filtra√ß√£o Glomerular (TFG)</a></li>
                        <li><a class="dropdown-item" href="calculadoras/risco-coronariano.html">Risco Cardiovascular</a></li>
                        <li><a class="dropdown-item" href="calculadoras/ldl.html">Colesterol LDL</a></li>
                        <li><a class="dropdown-item" href="calculadoras/carga-tabagica.html">Carga Tab√°gica</a></li>
                        <li><a class="dropdown-item" href="calculadoras/dpp.html">Data Prov√°vel do Parto</a></li>
                        <li><a class="dropdown-item" href="calculadoras/idade-gestacional.html">Idade Gestacional</a></li>
                        <li><a class="dropdown-item" href="calculadoras/parkland.html">Ressuscita√ß√£o Vol√™mica (Parkland)</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Prontu√°rio
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="prontuario/consulta-geral.html">Consulta Geral</a></li>
                        <li><a class="dropdown-item" href="prontuario/remedios.html">Formatar Rem√©dios IPM Sistemas</a></li>
                        <li><a class="dropdown-item" href="prontuario/radiologia-laudos.html">Modelos de Laudos</a></li>
                    </ul>
                </li>
            </ul>
            
            <!-- Duas op√ß√µes de busca -->
            <div class="d-flex gap-2">
                <!-- Busca interna do site -->
                <form class="d-flex position-relative" role="search" onsubmit="return false;">
                    <div class="input-group input-group-sm">
                        <input id="buscarInterno" class="form-control" type="search" placeholder="Buscar ferramenta..." aria-label="Search" autocomplete="off" oninput="filterSuggestions()" style="min-width: 150px;">
                        <button class="btn btn-success btn-sm" type="submit" title="Buscar no site">
                            <small>üîç</small>
                        </button>
                    </div>
                    <ul id="searchSuggestions" class="list-group position-absolute top-100 start-0 w-100 z-3" style="max-height: 300px; overflow-y: auto; display: none;"></ul>
                </form>

                <!-- Busca externa (DuckDuckGo) com filtros de sites confi√°veis -->
                <form class="d-flex" action="https://duckduckgo.com/" method="get" target="_blank" onsubmit="addMedicalSiteFilter(event)">
                    <div class="input-group input-group-sm">
                        <input name="q" id="webSearch" class="form-control" type="search" placeholder="Buscar na web..." aria-label="Web Search" style="min-width: 150px;">
                        <button class="btn btn-outline-light btn-sm" type="submit" title="Buscar em sites m√©dicos confi√°veis">
                            <small>üåê</small>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</nav>

<!-- Script para funcionalidades de busca -->
<script>
// Base de dados das p√°ginas do site para busca interna
const sitePages = [
    { title: "√çndice de Massa Corporal (IMC)", url: "calculadoras/imc.html", category: "Calculadora", keywords: ["imc", "peso", "massa", "corporal", "obesidade"] },
    { title: "Taxa de Filtra√ß√£o Glomerular (TFG)", url: "calculadoras/tfg.html", category: "Calculadora", keywords: ["tfg", "filtra√ß√£o", "glomerular", "rim", "creatinina"] },
    { title: "Risco Cardiovascular", url: "calculadoras/risco-coronariano.html", category: "Calculadora", keywords: ["risco", "cardiovascular", "coron√°rio", "cora√ß√£o", "infarto"] },
    { title: "Colesterol LDL", url: "calculadoras/ldl.html", category: "Calculadora", keywords: ["colesterol", "ldl", "lip√≠dio", "gordura"] },
    { title: "Carga Tab√°gica", url: "calculadoras/carga-tabagica.html", category: "Calculadora", keywords: ["carga", "tab√°gica", "cigarro", "fumo", "tabaco"] },
    { title: "Data Prov√°vel do Parto", url: "calculadoras/dpp.html", category: "Calculadora", keywords: ["dpp", "parto", "gravidez", "gesta√ß√£o", "naegele"] },
    { title: "Idade Gestacional", url: "calculadoras/idade-gestacional.html", category: "Calculadora", keywords: ["idade", "gestacional", "gravidez", "semanas", "dum"] },
    { title: "Ressuscita√ß√£o Vol√™mica (Parkland)", url: "calculadoras/parkland.html", category: "Calculadora", keywords: ["parkland", "queimadura", "ressuscita√ß√£o", "vol√™mica", "fluido"] },
    { title: "Consulta Geral", url: "prontuario/consulta-geral.html", category: "Prontu√°rio", keywords: ["consulta", "geral", "exame", "f√≠sico", "semiologia"] },
    { title: "Formatar Medica√ß√µes IPM", url: "prontuario/remedios.html", category: "Prontu√°rio", keywords: ["medica√ß√£o", "rem√©dio", "ipm", "formatar", "prescri√ß√£o"] },
    { title: "Modelos de Laudos Radiologia", url: "prontuario/radiologia-laudos.html", category: "Prontu√°rio", keywords: ["laudo", "radiologia", "raio-x", "tc", "resson√¢ncia"] },
    { title: "Sistema de Pediatria", url: "pediatria/ajuda-pediatria.html", category: "Especialidade", keywords: ["pediatria", "crian√ßa", "pedi√°trico", "doses"] },
    { title: "Banco de Quest√µes", url: "https://rodrigovoigt.github.io/PythonHTML-Questoes-Comentadas/", category: "Externa", keywords: ["quest√µes", "prova", "resid√™ncia", "concurso"] }
];

// Sites m√©dicos confi√°veis para filtrar a busca web
const trustedMedicalSites = [
    "pubmed.ncbi.nlm.nih.gov",
    "uptodate.com",
    "nejm.org",
    "bmj.com",
    "thelancet.com",
    "jama.jamanetwork.com",
    "cochrane.org",
    "who.int",
    "cdc.gov",
    "anvisa.gov.br",
    "portal.cfm.org.br",
    "scielo.br",
    "rmmg.org",
    "rbcp.org.br",
    "sciencedirect.com",
    "nature.com",
    "medscape.com",
    "mayoclinic.org",
    "hopkinsmedicine.org",
    "msdmanuals.com"
];

// Fun√ß√£o para busca interna do site
function filterSuggestions() {
    const query = document.getElementById('buscarInterno').value.toLowerCase().trim();
    const suggestions = document.getElementById('searchSuggestions');
    
    if (query.length < 2) {
        suggestions.innerHTML = '';
        suggestions.style.display = 'none';
        return;
    }
    
    const filteredPages = sitePages.filter(page => {
        return page.title.toLowerCase().includes(query) ||
               page.category.toLowerCase().includes(query) ||
               page.keywords.some(keyword => keyword.includes(query));
    });
    
    if (filteredPages.length === 0) {
        suggestions.innerHTML = '<li class="list-group-item text-muted text-center py-3"><i class="bi bi-search"></i> Nenhum resultado encontrado</li>';
    } else {
        suggestions.innerHTML = filteredPages.slice(0, 6).map(page => {
            // Definir cor do badge baseado na categoria
            let badgeColor = 'secondary';
            switch(page.category) {
                case 'Calculadora': badgeColor = 'primary'; break;
                case 'Prontu√°rio': badgeColor = 'success'; break;
                case 'Especialidade': badgeColor = 'info'; break;
                case 'Externa': badgeColor = 'warning'; break;
            }
            
            return `<li class="list-group-item list-group-item-action" onclick="navigateToPage('${page.url}')" style="cursor: pointer;">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center gap-2 mb-1">
                            <strong class="text-dark">${page.title}</strong>
                            <span class="badge bg-${badgeColor} text-white">${page.category}</span>
                        </div>
                        <small class="text-muted">
                            <i class="bi bi-tags-fill me-1"></i>
                            ${page.keywords.slice(0, 3).join(', ')}
                        </small>
                    </div>
                    <div class="text-success fw-bold">
                        <i class="bi bi-arrow-right"></i>
                    </div>
                </div>
            </li>`;
        }).join('');
    }
    
    suggestions.style.display = 'block';
}

// Fun√ß√£o para navegar para p√°gina selecionada
function navigateToPage(url) {
    if (url.startsWith('http')) {
        window.open(url, '_blank');
    } else {
        window.location.href = url;
    }
    document.getElementById('searchSuggestions').style.display = 'none';
    document.getElementById('buscarInterno').value = '';
}

// Fun√ß√£o para adicionar filtro de sites m√©dicos √† busca web
function addMedicalSiteFilter(event) {
    const searchInput = document.getElementById('webSearch');
    const query = searchInput.value.trim();
    
    if (query) {
        // Criar um input hidden com a consulta filtrada
        const form = event.target;
        
        // Remove input hidden anterior se existir
        const existingHidden = form.querySelector('input[name="q"][type="hidden"]');
        if (existingHidden) {
            existingHidden.remove();
        }
        
        // Criar novo input hidden com a consulta filtrada
        const hiddenInput = document.createElement('input');
        hiddenInput.type = 'hidden';
        hiddenInput.name = 'q';
        
        // Adicionar filtro de sites confi√°veis √† consulta
        const siteFilter = trustedMedicalSites.map(site => `site:${site}`).join(' OR ');
        hiddenInput.value = `${query} (${siteFilter})`;
        
        form.appendChild(hiddenInput);
        
        // Limpar o campo vis√≠vel para n√£o mostrar a consulta complexa
        searchInput.name = 'q_visible';
    }
}

// Fechar sugest√µes ao clicar fora
document.addEventListener('click', function(event) {
    const searchContainer = event.target.closest('.position-relative');
    if (!searchContainer) {
        document.getElementById('searchSuggestions').style.display = 'none';
    }
});

// Navega√ß√£o por teclado nas sugest√µes
document.getElementById('buscarInterno').addEventListener('keydown', function(event) {
    const suggestions = document.getElementById('searchSuggestions');
    const items = suggestions.querySelectorAll('.list-group-item-action');
    
    if (event.key === 'Enter' && items.length > 0) {
        event.preventDefault();
        items[0].click();
    } else if (event.key === 'Escape') {
        suggestions.style.display = 'none';
    }
});
</script>

<!-- Offcanvas Sidebar com todas as op√ß√µes -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
    <div class="offcanvas-header" style="background-color: #00a66c; color: white;">
        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu Completo</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <!-- Todas as Calculadoras -->
        <div class="mb-4">
            <h6 class="text-success fw-bold mb-3">üßÆ Todas as Calculadoras</h6>
            <div class="list-group list-group-flush">
                <a href="calculadoras/imc.html" class="list-group-item list-group-item-action">√çndice de Massa Corporal (IMC)</a>
                <a href="calculadoras/tfg.html" class="list-group-item list-group-item-action">Taxa de Filtra√ß√£o Glomerular (TFG)</a>
                <a href="calculadoras/risco-coronariano.html" class="list-group-item list-group-item-action">Risco Cardiovascular</a>
                <a href="calculadoras/ldl.html" class="list-group-item list-group-item-action">Colesterol LDL</a>
                <a href="calculadoras/carga-tabagica.html" class="list-group-item list-group-item-action">Carga Tab√°gica</a>
                <a href="calculadoras/dpp.html" class="list-group-item list-group-item-action">Data Prov√°vel do Parto</a>
                <a href="calculadoras/idade-gestacional.html" class="list-group-item list-group-item-action">Idade Gestacional</a>
                <a href="calculadoras/parkland.html" class="list-group-item list-group-item-action">Ressuscita√ß√£o Vol√™mica (Parkland)</a>
            </div>
        </div>

        <!-- Especialidades M√©dicas -->
        <div class="mb-4">
            <h6 class="text-success fw-bold mb-3">ü©∫ Por Especialidade</h6>
            
            <!-- Aten√ß√£o Prim√°ria -->
            <div class="accordion" id="accordionEspecialidades">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingAtencao">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAtencao" aria-expanded="false" aria-controls="collapseAtencao">
                            Aten√ß√£o Prim√°ria
                        </button>
                    </h2>
                    <div id="collapseAtencao" class="accordion-collapse collapse" aria-labelledby="headingAtencao" data-bs-parent="#accordionEspecialidades">
                        <div class="accordion-body p-2">
                            <a href="calculadoras/imc.html" class="d-block text-decoration-none py-1">‚Ä¢ IMC</a>
                            <a href="calculadoras/tfg.html" class="d-block text-decoration-none py-1">‚Ä¢ TFG</a>
                            <a href="calculadoras/risco-coronariano.html" class="d-block text-decoration-none py-1">‚Ä¢ Risco Cardiovascular</a>
                            <a href="calculadoras/ldl.html" class="d-block text-decoration-none py-1">‚Ä¢ Colesterol LDL</a>
                            <a href="calculadoras/carga-tabagica.html" class="d-block text-decoration-none py-1">‚Ä¢ Carga Tab√°gica</a>
                        </div>
                    </div>
                </div>

                <!-- Gineco/Obstetr√≠cia -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingGineco">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGineco" aria-expanded="false" aria-controls="collapseGineco">
                            Ginecologia/Obstetr√≠cia
                        </button>
                    </h2>
                    <div id="collapseGineco" class="accordion-collapse collapse" aria-labelledby="headingGineco" data-bs-parent="#accordionEspecialidades">
                        <div class="accordion-body p-2">
                            <a href="calculadoras/dpp.html" class="d-block text-decoration-none py-1">‚Ä¢ Data Prov√°vel do Parto</a>
                            <a href="calculadoras/idade-gestacional.html" class="d-block text-decoration-none py-1">‚Ä¢ Idade Gestacional</a>
                            <a href="prontuario/exame-fisico-ginecologico.html" class="d-block text-decoration-none py-1">‚Ä¢ Exame Ginecol√≥gico</a>
                        </div>
                    </div>
                </div>

                <!-- Pediatria -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingPediatria">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePediatria" aria-expanded="false" aria-controls="collapsePediatria">
                            Pediatria
                        </button>
                    </h2>
                    <div id="collapsePediatria" class="accordion-collapse collapse" aria-labelledby="headingPediatria" data-bs-parent="#accordionEspecialidades">
                        <div class="accordion-body p-2">
                            <a href="pediatria/ajuda-pediatria.html" class="d-block text-decoration-none py-1">‚Ä¢ Sistema de Pediatria</a>
                            <span class="text-muted">Outras funcionalidades em desenvolvimento...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ferramentas do Prontu√°rio -->
        <div class="mb-4">
            <h6 class="text-success fw-bold mb-3">üìã Prontu√°rio</h6>
            <div class="list-group list-group-flush">
                <a href="prontuario/consulta-geral.html" class="list-group-item list-group-item-action">Consulta Geral</a>
                <a href="prontuario/remedios.html" class="list-group-item list-group-item-action">Formatar Medica√ß√µes IPM</a>
                <a href="prontuario/radiologia-laudos.html" class="list-group-item list-group-item-action">Modelos de Laudos Radiologia</a>
            </div>
        </div>

        <!-- Ferramentas Externas -->
        <div class="mb-4">
            <h6 class="text-success fw-bold mb-3">üîó Ferramentas Externas</h6>
            <div class="list-group list-group-flush">
                <a href="ferramenta-externa/ajuda-pediatria.html" class="list-group-item list-group-item-action">Ajuda Pediatria</a>
                <a href="https://rodrigovoigt.github.io/PythonHTML-Questoes-Comentadas/" class="list-group-item list-group-item-action" target="_blank">Banco de Quest√µes</a>
            </div>
        </div>
    </div>
</div>